{"version":3,"sources":["webpack:///./src/views/Tabs/RolePermissionMap.vue?a7a2","webpack:///src/views/Tabs/RolePermissionMap.vue","webpack:///./src/views/Tabs/RolePermissionMap.vue?e4ba","webpack:///./src/views/Tabs/RolePermissionMap.vue","webpack:///./node_modules/core-js/library/modules/es6.array.is-array.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./src/views/Tabs/RolePermissionMap.vue?8825","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/core-js/library/fn/is-iterable.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/array/from.js","webpack:///./node_modules/core-js/library/modules/core.is-iterable.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/array/is-array.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/is-iterable.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/core-js/library/fn/array/is-array.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","wrap-class","staticClass","_v","size","filterable","placeholder","on","change","$event","currentPage","flush","model","value","callback","$$v","code","expression","label","_l","app","key","name","type","click","back","save","activecodes","slot","indeterminate","checkapp","$set","_s","m","id","checkmodule","p","checkmoduleAll","staticRenderFns","RolePermissionMapvue_type_script_lang_js_","components","data","apps","keyword","systemSelect","mounted","_mounted","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_this$apps","getapps","getcols","nowapps","_this","wrap","_context","prev","next","$http","get","concat","$route","params","roleid","sent","forEach","checked","modules","permissions","nowapp","find","a","appCode","nowm","moduleId","nowp","permissionId","checkappAll","push","apply","toConsumableArray","map","item","stop","arguments","computed","filterapps","_this2","filter","methods","_flush","_callee2","_context2","length","mcheckcount","checkcount","_save","_callee3","body","_context3","newa","newm","console","log","post","$message","showClose","message","$store","commit","fullPath","Tabs_RolePermissionMapvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","$export","__webpack_require__","S","isArray","$defineProperty","createDesc","module","exports","object","index","f","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RolePermissionMap_vue_vue_type_style_index_0_id_efd1a1f4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RolePermissionMap_vue_vue_type_style_index_0_id_efd1a1f4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","ctx","toObject","call","isArrayIter","toLength","createProperty","getIterFn","F","iter","Array","from","arrayLike","result","step","iterator","O","C","aLen","mapfn","undefined","mapping","iterFn","done","_arrayWithoutHoles","arr","is_array_default","i","arr2","_iterableToArray","is_iterable_default","prototype","toString","from_default","_nonIterableSpread","TypeError","_toConsumableArray","d","classof","ITERATOR","Iterators","isIterable","it","hasOwnProperty"],"mappings":"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","file":"js/chunk-c1443b62.04f154da.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-scrollbar',{attrs:{\"wrap-class\":\"scrollbar-wrapper-y\"}},[_c('div',[_c('div',{staticClass:\"flex\"},[_c('span',[_vm._v(\"选择系统 :\")]),_c('el-select',{attrs:{\"size\":\"mini\",\"filterable\":\"\",\"placeholder\":\"请选择系统\"},on:{\"change\":function($event){_vm.currentPage=1;_vm.flush();}},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_vm._l((_vm.apps),function(app){return _c('el-option',{key:app.code,attrs:{\"label\":app.name,\"value\":app.code}})})],2),_c('div',{staticClass:\"flex1\"}),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":_vm.back}},[_vm._v(\"关闭并返回\")]),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1),_c('el-collapse',{model:{value:(_vm.activecodes),callback:function ($$v) {_vm.activecodes=$$v},expression:\"activecodes\"}},_vm._l((_vm.filterapps),function(app){return _c('el-collapse-item',{key:app.code,attrs:{\"name\":app.code}},[_c('template',{slot:\"title\"},[_c('el-checkbox',{attrs:{\"indeterminate\":app.indeterminate},on:{\"change\":function($event){_vm.checkapp(app)}},model:{value:(app.checked),callback:function ($$v) {_vm.$set(app, \"checked\", $$v)},expression:\"app.checked\"}}),_c('span',[_vm._v(_vm._s(app.name))])],1),_vm._l((app.modules),function(m){return _c('div',{key:m.id,staticClass:\"collapse-content\"},[_c('el-checkbox',{attrs:{\"indeterminate\":m.indeterminate},on:{\"change\":function($event){_vm.checkmodule(m,app)}},model:{value:(m.checked),callback:function ($$v) {_vm.$set(m, \"checked\", $$v)},expression:\"m.checked\"}},[_vm._v(_vm._s(m.name)+\":\")]),_vm._l((m.permissions),function(p){return _c('el-checkbox',{key:p.id,on:{\"change\":function($event){_vm.checkmoduleAll(m,app)}},model:{value:(p.checked),callback:function ($$v) {_vm.$set(p, \"checked\", $$v)},expression:\"p.checked\"}},[_vm._v(_vm._s(p.name))])})],2)})],2)}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-scrollbar wrap-class=\"scrollbar-wrapper-y\">\r\n    <div>\r\n      <div class=\"flex\">\r\n        <span>选择系统 :</span>\r\n        <el-select\r\n          size=\"mini\"\r\n          v-model=\"code\"\r\n          @change=\"currentPage=1;flush();\"\r\n          filterable\r\n          placeholder=\"请选择系统\"\r\n        >\r\n          <el-option label=\"全部\" value></el-option>\r\n          <el-option v-for=\"app in apps\" :key=\"app.code\" :label=\"app.name\" :value=\"app.code\"></el-option>\r\n        </el-select>\r\n        <div class=\"flex1\"></div>\r\n        <el-button type=\"danger\" size=\"mini\" @click=\"back\">关闭并返回</el-button>\r\n        <el-button type=\"success\" size=\"mini\" @click=\"save\">保存</el-button>\r\n      </div>\r\n      <el-collapse v-model=\"activecodes\">\r\n        <el-collapse-item v-for=\"app in filterapps\" :key=\"app.code\" :name=\"app.code\">\r\n            <template slot=\"title\">\r\n                <el-checkbox :indeterminate=\"app.indeterminate\" v-model=\"app.checked\" @change=\"checkapp(app)\"></el-checkbox> <span>{{app.name}}</span>\r\n            </template>\r\n            <div class=\"collapse-content\" v-for=\"m in app.modules\" :key=\"m.id\">\r\n              <el-checkbox :indeterminate=\"m.indeterminate\" v-model=\"m.checked\" @change=\"checkmodule(m,app)\">{{m.name}}:</el-checkbox>\r\n              <el-checkbox v-for=\"p in m.permissions\" :key=\"p.id\" v-model=\"p.checked\" @change=\"checkmoduleAll(m,app)\">{{p.name}}</el-checkbox>\r\n            </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n  </el-scrollbar>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  components: {},\r\n  data() {\r\n    return {\r\n      apps: [],\r\n      code: \"\",\r\n      activecodes: [\"1\"],\r\n      keyword: \"\",\r\n      systemSelect: \"\"\r\n    };\r\n  },\r\n  async mounted() {\r\n    const getapps = this.$http.get(\"/base/api/App/AppDeatil\");\r\n    const getcols = this.$http.get(`/base/api/Role/GetPermission?id=${this.$route.params.roleid}`);\r\n    const apps = await getapps;\r\n    const nowapps = await getcols;\r\n    apps.forEach(app=>{\r\n      app.checked = false;\r\n      app.indeterminate = false;\r\n      app.modules.forEach(m=>{\r\n        m.indeterminate = false;\r\n        m.checked = false;\r\n        m.permissions.forEach(p=>{\r\n          p.checked = false;\r\n        })\r\n      })\r\n    })\r\n    nowapps.forEach(nowapp=>{\r\n      const app = apps.find(a=>a.code==nowapp.appCode);\r\n      nowapp.modules.forEach(nowm=>{\r\n        const m = app.modules.find(a=>a.id==nowm.moduleId);\r\n        nowm.permissions.forEach(nowp=>{\r\n          const p = m.permissions.find(a=>a.id==nowp.permissionId);\r\n          p.checked = true;\r\n        })\r\n        m.checked = true;\r\n        this.checkmoduleAll(m);\r\n      })\r\n      app.checked = true;\r\n      this.checkappAll(app);\r\n    })\r\n    this.apps.push(...apps);\r\n    this.activecodes = apps.map(item=>item.code);\r\n  },\r\n  computed:{\r\n    filterapps(){\r\n      if(this.code)\r\n        return this.apps.filter(a=>a.code==this.code)\r\n      else return this.apps;\r\n    }\r\n  },\r\n  methods: {\r\n    async flush() {\r\n      // let result = await this.$http.post(\"/base/api/App/Query\", {\r\n      //   pageIndex: this.currentPage,\r\n      //   pageSize: this.pageSize,\r\n      //   name: this.keyword\r\n      // });\r\n      // this.items = result.list;\r\n      // this.total = result.totalCount;\r\n    },\r\n    checkapp(app){\r\n      app.indeterminate = false;\r\n      app.modules.forEach(m=>{\r\n        m.indeterminate = false;\r\n        m.checked = app.checked;\r\n        m.permissions.forEach(p=>{\r\n          p.checked = app.checked;\r\n        })\r\n      })\r\n    },\r\n    checkmodule(m,app){\r\n      m.indeterminate = false;\r\n      if(m.checked) app.checked = m.checked;\r\n      m.permissions.forEach(p=>{\r\n        p.checked = m.checked;\r\n      })\r\n      this.checkappAll(app);\r\n    },\r\n    checkmoduleAll(m,app){\r\n      if(!m.permissions.length) return;\r\n      var mcheckcount = m.permissions.filter(a=>a.checked).length;\r\n      if(mcheckcount){\r\n        if(mcheckcount==m.permissions.length){\r\n          m.indeterminate = false;\r\n          m.checked = true;\r\n        }\r\n        else m.indeterminate = true;\r\n      }\r\n      else {\r\n        m.indeterminate = false;\r\n        m.checked = false;\r\n      }\r\n      if(app) this.checkappAll(app)\r\n    },\r\n    checkappAll(app){\r\n      if(!app.modules.length) return;\r\n      var checkcount = app.modules.filter(a=>a.checked&&!a.indeterminate).length;\r\n      if(checkcount&&app.modules.length==checkcount){\r\n        app.indeterminate = false;\r\n        app.checked = true;\r\n        return;\r\n      }\r\n      checkcount = app.modules.filter(a=>!a.checked&&!a.indeterminate).length;\r\n      if(checkcount&&app.modules.length==checkcount){\r\n        app.indeterminate = false;\r\n        app.checked = false;\r\n        return;\r\n      }\r\n      app.indeterminate = true;\r\n    },\r\n    async save(){\r\n      var body = [];\r\n      this.apps.forEach(app=>{\r\n        if(app.checked||app.indeterminate){\r\n          var newa = {appCode:app.code};\r\n          newa.modules = [];\r\n          app.modules.forEach(m=>{\r\n            if(m.checked||m.indeterminate){\r\n              var newm = {moduleId:m.id};\r\n              newm.permissions = [];\r\n              m.permissions.forEach(p=>{\r\n                if(p.checked) newm.permissions.push({permissionId:p.id});\r\n              })\r\n              newa.modules.push(newm);\r\n            }\r\n          })\r\n          body.push(newa);\r\n        }\r\n      })\r\n      console.log(body);\r\n      await this.$http.post(`/base/api/Role/SetPermission?id=${this.$route.params.roleid}`,body);\r\n      this.$message({ showClose: true, type: 'success', message: '保存成功!' });\r\n    },\r\n    back(){\r\n      this.$store.commit(\"tab/closeAndTo\", {fullPath:\"/home/role\"});\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.page_footer_box {\r\n  float: right;\r\n  margin: 3px 10px;\r\n}\r\n\r\n.el-collapse{\r\n    margin: 8px 30px;\r\n    /deep/ {\r\n      .el-collapse-item__content{\r\n        padding-top: 0;\r\n        padding-bottom: 10px;\r\n      }\r\n      .el-collapse-item__header{\r\n        font-size: 12px;\r\n        color: #606266;\r\n      }\r\n  }\r\n}\r\n\r\n.el-checkbox{\r\n    padding: 0 4px;\r\n    margin-right: 0;\r\n}\r\n\r\n.collapse-content{\r\n    padding-left: 22px;\r\n    margin-bottom: 4px;\r\n    .el-checkbox{\r\n        margin-left: 6px;\r\n        /deep/ {\r\n          .el-checkbox__label{\r\n            padding-left: 3px;\r\n            color: #606266;\r\n            font-size: 12px;\r\n          }\r\n        }\r\n    }\r\n}\r\n\r\n.flex>.el-button{\r\n    margin: 0 8px;\r\n}\r\n.flex>.el-button:last-child{\r\n    margin-right: 20px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RolePermissionMap.vue?vue&type=template&id=efd1a1f4&scoped=true&\"\nimport script from \"./RolePermissionMap.vue?vue&type=script&lang=js&\"\nexport * from \"./RolePermissionMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RolePermissionMap.vue?vue&type=style&index=0&id=efd1a1f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"efd1a1f4\",\n  null\n  \n)\n\ncomponent.options.__file = \"RolePermissionMap.vue\"\nexport default component.exports","// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\nvar $export = require('./_export');\n\n$export($export.S, 'Array', { isArray: require('./_is-array') });\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionMap.vue?vue&type=style&index=0&id=efd1a1f4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionMap.vue?vue&type=style&index=0&id=efd1a1f4&lang=scss&scoped=true&\"","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","import _Array$isArray from \"../../core-js/array/is-array\";\nexport default function _arrayWithoutHoles(arr) {\n  if (_Array$isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","import _Array$from from \"../../core-js/array/from\";\nimport _isIterable from \"../../core-js/is-iterable\";\nexport default function _iterableToArray(iter) {\n  if (_isIterable(Object(iter)) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return _Array$from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","module.exports = require(\"core-js/library/fn/array/from\");","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","module.exports = require(\"core-js/library/fn/array/is-array\");","module.exports = require(\"core-js/library/fn/is-iterable\");","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","require('../../modules/es6.array.is-array');\nmodule.exports = require('../../modules/_core').Array.isArray;\n"],"sourceRoot":""}