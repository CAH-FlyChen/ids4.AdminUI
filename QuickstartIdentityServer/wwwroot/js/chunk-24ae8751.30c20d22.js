(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24ae8751"],{"045e":function(e,t,n){"use strict";var i=n("439f"),a=n.n(i);a.a},"07c2":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{staticClass:"dialog"},[n("div",{staticClass:"dialog-cover back",on:{click:e.closeMyself}}),n("div",{ref:"dialogContentBox",staticClass:"dialog-content",style:{width:e.dialogWidth+"px"}},[n("div",{ref:"header",staticClass:"dialog_head back"},[n("el-row",[n("el-col",{staticClass:"dialog_head_tip",attrs:{span:22}},[e._t("header",[e._v("提示")])],2),n("el-col",{attrs:{span:2}},[n("el-button",{staticClass:"el-message-box__headerbtn el-message-box_btn",attrs:{type:"text"},on:{click:e.closeMyself}},[n("i",{staticClass:"el-message-box__close el-icon-close"})])],1)],1)],1),n("div",{ref:"dialogMain",attrs:{id:"dialog_main"}},[n("el-scrollbar",{ref:"scrollbar",attrs:{"wrap-class":"scrollbar-wrapper-y"}},[e._t("main",[e._v("弹窗内容")])],2)],1),n("div",{ref:"footer",staticClass:"el-message-box__btns"},[e._t("footer",[e._v("按钮区域")])],2)])])])},a=[],o=(n("c5f6"),{props:{dialogWidth:{type:Number}},data:function(){return{dialogMainHeight:""}},mounted:function(){var e=this;this.$nextTick(function(){e.dialogMainHeight=e.$refs.dialogContentBox.clientHeight,e.resize()}),this.$$resize=function(){e.resize()},window.addEventListener("resize",this.$$resize)},methods:{closeMyself:function(){this.$emit("on-close")},resize:function(){var e=window.innerHeight;this.dialogMainHeight>=e-60?(this.$refs.dialogMain.style.height=e-60-this.$refs.header.clientHeight-this.$refs.footer.clientHeight+"px",this.$refs.dialogContentBox.style.top="30px"):(this.$refs.dialogMain.style.height="auto",this.$refs.dialogContentBox.style.top=(e-this.dialogMainHeight)/2+"px"),this.$refs.scrollbar.update()}},destroyed:function(){window.removeEventListener("resize",this.$$resize)}}),r=o,s=(n("a99f"),n("2877")),c=Object(s["a"])(r,i,a,!1,null,"41da0918",null);c.options.__file="dialogBar.vue";t["a"]=c.exports},"1af6":function(e,t,n){var i=n("63b6");i(i.S,"Array",{isArray:n("9003")})},"20fd":function(e,t,n){"use strict";var i=n("d9f6"),a=n("aebd");e.exports=function(e,t,n){t in e?i.f(e,t,a(0,n)):e[t]=n}},"439f":function(e,t,n){},5489:function(e,t,n){},"549b":function(e,t,n){"use strict";var i=n("d864"),a=n("63b6"),o=n("241e"),r=n("b0dc"),s=n("3702"),c=n("b447"),l=n("20fd"),u=n("7cd6");a(a.S+a.F*!n("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,a,f,d=o(e),p="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,h=void 0!==m,b=0,v=u(d);if(h&&(m=i(m,g>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(t=c(d.length),n=new p(t);t>b;b++)l(n,b,h?m(d[b],b):d[b]);else for(f=v.call(d),n=new p;!(a=f.next()).done;b++)l(n,b,h?r(f,m,[a.value,b],!0):a.value);return n.length=b,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},6082:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper-y"}},[n("div",[n("div",{staticClass:"flex"},[n("span",[e._v("选择系统 :")]),n("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择系统"},on:{change:function(t){e.currentPage=1,e.flush()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[n("el-option",{attrs:{label:"全部",value:""}}),e._l(e.apps,function(e){return n("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})],2),n("span",[e._v("模块名称:")]),n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.currentPage=1,e.flush()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.currentPage=1,e.flush()}}},[e._v("查询")]),n("div",{staticClass:"flex1"}),n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-circle-plus"},on:{click:function(t){e.edit(0)}}},[e._v("创建模块")]),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:e.delRole}},[e._v("删除模块")])],1),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.roleData,"tooltip-effect":"dark",border:"",align:"center",stripe:!0,size:"mini"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),n("el-table-column",{attrs:{prop:"appName",label:"所属系统",align:"center"}}),n("el-table-column",{attrs:{prop:"code",label:"模块编码",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"模块名称",align:"center"}}),n("el-table-column",{attrs:{width:"400",align:"center",label:"权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{"text-align":"left"}},[e._l(t.row.permissions,function(i){return n("span",{key:i.id,staticClass:"el-tag el-tag--info el-tag--medium",on:{click:function(n){e.addPermission(1,t.row,i)}}},[e._v("\n                            "+e._s(i.name)+" "),n("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(n){n.stopPropagation(),e.delPermission(t.row,i)}}})])}),n("span",{staticClass:"el-tag el-tag--medium",on:{click:function(n){e.addPermission(0,t.row)}}},[e._v("添加")])],2)]}}])}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.edit(1,t.row)}}},[e._v("修改模块")])]}}])})],1),n("el-pagination",{staticClass:"page_footer_box",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":function(t){e.currentPage=1,e.flush()},"current-change":e.flush,"update:currentPage":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t}}})],1),n("ModuleEdit",{attrs:{config:e.config},on:{close:e.flush}}),n("AddPermission",{attrs:{config:e.config2},on:{close:e.flush}})],1)},a=[],o=(n("7f7f"),n("96cf"),n("3b8d")),r=n("75fc"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.config.show?n("dialogBar",{attrs:{"dialog-width":e.config.width},on:{"on-close":e.close}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.config.title))]),n("div",{staticClass:"dialog_publish_main",attrs:{slot:"main"},slot:"main"},[n("el-form",{ref:"form",attrs:{model:e.config.data,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"编号",prop:"code"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.config.data.code,callback:function(t){e.$set(e.config.data,"code",t)},expression:"config.data.code"}})],1),n("el-form-item",{attrs:{label:"模块名称",prop:"name"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.config.data.name,callback:function(t){e.$set(e.config.data,"name",t)},expression:"config.data.name"}})],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(t){e.close(!1)}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.onSubmit()}}},[e._v("确认")])],1)]):e._e()},c=[],l=n("07c2"),u={components:{dialogBar:l["a"]},props:{config:{type:Object,default:{show:!1,width:800,title:"",type:0,data:{}}}},data:function(){return{rules:{code:[{required:!0,message:"请输入模块编号",trigger:"blur"}],name:[{required:!0,message:"请输入模块名称",trigger:"blur"}]}}},methods:{close:function(e){this.config.show=!1,e&&this.$emit("close")},onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}t.t0=e.config.type,t.next=0===t.t0?4:1===t.t0?7:10;break;case 4:return t.next=6,e.$http.post("/base/api/App/AddModule",e.config.data);case 6:return t.abrupt("break",10);case 7:return t.next=9,e.$http.post("/base/api/App/UpdateModule",e.config.data);case 9:return t.abrupt("break",10);case 10:e.close(!0);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}}},f=u,d=(n("999d"),n("2877")),p=Object(d["a"])(f,s,c,!1,null,"1d8699ed",null);p.options.__file="ModuleEdit.vue";var g=p.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.config.show?n("dialogBar",{attrs:{"dialog-width":e.config.width},on:{"on-close":e.close}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.config.title))]),n("div",{staticClass:"dialog_publish_main",attrs:{slot:"main"},slot:"main"},[n("el-form",{ref:"form",attrs:{model:e.config.data,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.config.data.name,callback:function(t){e.$set(e.config.data,"name",t)},expression:"config.data.name"}})],1),n("el-form-item",{attrs:{label:"Controller",prop:"controllerName"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.config.data.controllerName,callback:function(t){e.$set(e.config.data,"controllerName",t)},expression:"config.data.controllerName"}})],1),n("el-form-item",{attrs:{label:"Action",prop:"actionName"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.config.data.actionName,callback:function(t){e.$set(e.config.data,"actionName",t)},expression:"config.data.actionName"}})],1),n("el-form-item",{attrs:{label:"接口地址",prop:"url"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.config.data.url,callback:function(t){e.$set(e.config.data,"url",t)},expression:"config.data.url"}})],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(t){e.close(!1)}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.onSubmit()}}},[e._v("确认")])],1)]):e._e()},h=[],b={components:{dialogBar:l["a"]},props:{config:{type:Object,default:{show:!1,width:800,title:"",type:0,data:{}}}},data:function(){return{rules:{name:[{required:!0,message:"请输入权限名称",trigger:"blur"}],controllerName:[{required:!0,message:"请输入控制器名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],actionName:[{required:!0,message:"请输入Action名称",trigger:"blur"}],url:[{required:!0,message:"请输入接口地址",trigger:"blur"}]}}},methods:{close:function(e){this.config.show=!1,e&&this.$emit("close")},onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}t.t0=e.config.type,t.next=0===t.t0?4:1===t.t0?7:10;break;case 4:return t.next=6,e.$http.post("/base/api/App/AddPermission",e.config.data);case 6:return t.abrupt("break",10);case 7:return t.next=9,e.$http.post("/base/api/App/UpdatePermission",e.config.data);case 9:return t.abrupt("break",10);case 10:e.close(!0);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}}},v=b,w=(n("6089"),Object(d["a"])(v,m,h,!1,null,"96e39076",null));w.options.__file="AddPermission.vue";var y=w.exports,x={components:{ModuleEdit:g,AddPermission:y},data:function(){return{apps:[],roleData:[],keyword:"",code:"",show:!1,currentPage:1,pageSize:10,total:0,config:{show:!1,width:450,title:"",data:{}},config2:{show:!1,width:450,title:"",data:{}}}},mounted:function(){var e=this;this.$http.post("/base/api/App/Query",{pageIndex:1,pageSize:9999}).then(function(t){var n;(n=e.apps).push.apply(n,Object(r["a"])(t.list))}),this.flush()},methods:{flush:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/base/api/App/QueryModule",{code:this.code,pageIndex:this.currentPage,pageSize:this.pageSize,name:this.keyword});case 2:t=e.sent,this.roleData=t.list,this.total=t.totalCount;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleSelectionChange:function(e){this.selectitems=e},delRole:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.selectitems||!this.selectitems.length){e.next=11;break}return e.next=3,this.$confirm("确认删除所选模块?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return t=this.selectitems.map(function(e){return e.id}),e.next=6,this.$http.post("/base/api/App/DelModule",t);case 6:this.roleData.length==t.length&&this.currentPage&&this.currentPage--,this.flush(),this.$message({showClose:!0,type:"success",message:"删除成功!"}),e.next=12;break;case 11:this.$message({showClose:!0,type:"warning",message:"请选择要删除的模块"});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addPermission:function(e,t,n){switch(this.config2.type=e,e){case 0:this.config2.title="添加权限 (".concat(t.appName,"-").concat(t.name,")"),this.config2.data={moduleId:t.id};break;case 1:this.config2.title="修改权限 (".concat(t.appName,"-").concat(t.name,")"),this.config2.data={name:n.name,controllerName:n.controllerName,actionName:n.actionName,url:n.url,id:n.id};break}this.config2.show=!0},delPermission:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("确认删除所选权限(".concat(n.name,")?"),"删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return e.next=4,this.$http.post("/base/api/App/DelPermission?id=".concat(n.id));case 4:this.flush(),this.$message({showClose:!0,type:"success",message:"删除成功!"});case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),edit:function(e,t){switch(this.config.type=e,e){case 0:if(this.code){this.config.title="创建模块",this.config.data={appCode:this.code};break}this.$message({showClose:!0,type:"warning",message:"请选择系统,再创建模块"});case 1:this.config.title="编辑模块",this.config.data={name:t.name,code:t.code,id:t.id};break}this.config.show=!0}}},_=x,k=(n("045e"),Object(d["a"])(_,i,a,!1,null,"ea9bf642",null));k.options.__file="ModuleManagement.vue";t["default"]=k.exports},6089:function(e,t,n){"use strict";var i=n("5489"),a=n.n(i);a.a},6121:function(e,t,n){},"75fc":function(e,t,n){"use strict";var i=n("a745"),a=n.n(i);function o(e){if(a()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var r=n("774e"),s=n.n(r),c=n("c8bb"),l=n.n(c);function u(e){if(l()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return s()(e)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){return o(e)||u(e)||f()}n.d(t,"a",function(){return d})},"774e":function(e,t,n){e.exports=n("d2d5")},"95d5":function(e,t,n){var i=n("40c3"),a=n("5168")("iterator"),o=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(i(t))}},"999d":function(e,t,n){"use strict";var i=n("6121"),a=n.n(i);a.a},a745:function(e,t,n){e.exports=n("f410")},a99f:function(e,t,n){"use strict";var i=n("b9f3"),a=n.n(i);a.a},b9f3:function(e,t,n){},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-24ae8751.30c20d22.js.map